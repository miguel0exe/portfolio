---
import { Icon } from "astro-icon/components";

const jobs = [
  {
    company: "PKU",
    role: "Desarrollador Java y ReactJs",
    period: "Ene 2025 – Actualidad",
    location: "Álvaro Obregón, CDMX",
    description:
      "Desarrollo de sitios web para clientes utilizando tecnologías modernas y arquitecturas de microfronts. Apoyo en administración de servidores y despliegue a producción.",
    skills: ["Java", "React", "Microfronts", "Redux", "Server Admin"],
  },
  {
    company: "Stefanini",
    role: "Desarrollador ReactJS SSR",
    period: "Feb 2024 – Oct 2024",
    location: "Remoto",
    description:
      "Colaboración en despliegues y automatización de procesos (CI/CD) para reducir tiempos de entrega. Integración de APIs REST y documentación técnica en Confluence.",
    skills: ["React SSR", "CI/CD", "REST APIs", "Confluence"],
  },
  {
    company: "Phinder",
    role: "Desarrollador React Js / Java",
    period: "Ago 2023 – Feb 2024",
    location: "Peri Sur, CDMX",
    description:
      "Implementación de endpoints en Java y desarrollo frontend a la medida para clientes. Integración completa de lógica de negocio back-end con interfaces React.",
    skills: ["Java", "Spring Boot", "React", "Redux", "Endpoints"],
  },
  {
    company: "CleveClick",
    role: "Desarrollador Java Jr",
    period: "Sept 2021 – Ago 2023",
    location: "Remoto",
    description:
      "Desarrollo de servicios REST y revisión exhaustiva del funcionamiento de sistemas legacy y nuevos módulos.",
    skills: ["Java", "REST Services", "System Analysis"],
  },
];

const quests = [
  {
    guild: "PKU",
    role: "Java & React Artificer",
    date: "2025 - Present",
    desc: "Despliegue de arquitecturas Microfronts y administración de servidores del reino.",
    loot: ["Java", "React", "Microfronts"],
  },
  {
    guild: "Stefanini",
    role: "ReactJS SSR Developer",
    date: "2024 - 2024",
    desc: "Automatización de procesos CI/CD y documentación técnica en Confluence.",
    loot: ["React SSR", "CI/CD", "Confluence"],
  },
  {
    guild: "Phinder",
    role: "Full Stack Developer",
    date: "2023 - 2024",
    desc: "Integración completa de lógica back-end con interfaces React personalizadas.",
    loot: ["Java", "Spring Boot", "React"],
  },
  {
    guild: "CleveClick",
    role: "Java Junior Developer",
    date: "2021 - 2023",
    desc: "Desarrollo de servicios REST y análisis de sistemas legacy.",
    loot: ["Java", "REST Services", "System Analysis"],
  },
];
---

<section id="experiencia" class="py-24 relative">
  <div class="max-w-4xl mx-auto px-6">
    <h2 class="text-4xl text-center mb-16 text-[#C8AA6E] drop-shadow-md">
      <span class="text-2xl block text-[#a8a29e] mb-2 font-serif italic"
        >Historial de Batallas</span
      >
      BITÁCORA DE MISIONES
    </h2>
    <span class="text-[#C8AA6E]">Botín Obtenido:</span>

    <div class="space-y-8">
      {
        quests.map((quest) => (
          <div class="relative group">
            <div class="absolute inset-0 border border-[#C8AA6E]/20 bg-[#1c1917]/40 clip-path-polygon hover:border-[#C8AA6E]/60 transition-colors duration-300" />

            <div class="relative p-6 flex flex-col md:flex-row gap-6 items-start">
              <div class="p-4 bg-[#0c0a09] border border-[#C8AA6E] shadow-[0_0_10px_rgba(200,170,110,0.3)]">
                <Icon name="mdi:sword-cross" class="w-8 h-8 text-[#C8AA6E]" />
              </div>

              <div class="flex-1">
                <div class="flex justify-between items-start mb-2">
                  <h3 class="text-xl font-bold text-[#e7e5e4]">{quest.role}</h3>
                  <span class="text-xs font-mono text-[#C8AA6E] border border-[#C8AA6E]/30 px-2 py-1">
                    {quest.date}
                  </span>
                </div>
                <p class="text-[#a8a29e] text-sm font-bold uppercase tracking-wide mb-3">
                  Guild: {quest.guild}
                </p>

                <p class="text-[#d6d3d1] italic mb-4 font-serif leading-relaxed">
                  "{quest.desc}"
                </p>

                <div class="flex items-center gap-2 text-xs">
                  <span class="text-[#C8AA6E]">Loot Acquired:</span>
                  {quest.loot.map((item) => (
                    <span class="text-[#a8a29e] bg-[#292524] px-2 py-1 rounded-sm border border-[#44403c]">
                      {item}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  // Este script detecta cuando las tarjetas entran en pantalla
  const observerOptions = {
    root: null,
    rootMargin: "0px",
    threshold: 0.1, // Se activa cuando el 10% del elemento es visible
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        // Cuando es visible, quitamos la invisibilidad y el desplazamiento
        entry.target.classList.remove("opacity-0", "translate-y-8");
        // Dejamos de observar para que no se anime de nuevo al subir
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll(".reveal-item").forEach((el) => {
    observer.observe(el);
  });
</script>
