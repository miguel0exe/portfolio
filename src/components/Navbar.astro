---
const navItems = [
  { title: "Inicio", label: "inicio", url: "/#inicio" },
  { title: "Experiencia", label: "experiencia", url: "/#experiencia" },
  { title: "Proyectos", label: "proyectos", url: "/#proyectos" },
  { title: "Sobre Mí", label: "sobre-mi", url: "/#sobre-mi" },
  {
    title: "Contacto",
    label: "contacto",
    url: "mailto:miguel.emezero@gmail.com",
  },
];
---

<nav class="fixed top-0 left-1/2 -translate-x-1/2 z-50 mt-6 hidden md:block">
  <div
    class="flex items-center gap-1 bg-black/40 border border-white/10 backdrop-blur-2xl rounded-full p-1 shadow-xl shadow-black/20 ring-1 ring-white/5 px-2"
  >
    {
      navItems.map((link) => (
        <a
          class="nav-link relative px-4 py-2 text-sm font-medium text-slate-400 transition-colors duration-300 hover:text-white rounded-full hover:bg-white/5"
          aria-label={link.label}
          href={link.url}
          data-section={link.label}
        >
          {link.title}
        </a>
      ))
    }
  </div>
</nav>

<nav class="fixed bottom-6 left-1/2 -translate-x-1/2 z-50 md:hidden">
  <div
    class="flex items-center gap-6 bg-black/60 border border-white/10 backdrop-blur-2xl rounded-full p-4 shadow-2xl"
  >
    <a
      href="#experiencia"
      aria-label="Experiencia"
      class="text-slate-400 hover:text-blue-400"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        ><path
          fill="currentColor"
          d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2V9h-2V7h8v12z"
        ></path></svg
      ></a
    >
    <a
      href="#proyectos"
      aria-label="Proyectos"
      class="text-slate-400 hover:text-blue-400"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        ><path
          fill="currentColor"
          d="M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2z"
        ></path></svg
      ></a
    >
    <a
      href="#sobre-mi"
      aria-label="Sobre mí"
      class="text-slate-400 hover:text-blue-400"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        ><path
          fill="currentColor"
          d="M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"
        ></path></svg
      ></a
    >
  </div>
</nav>

<script>
  /* LÓGICA DE INTERSECCIÓN (Para que se ilumine al bajar) */
  const sections = document.querySelectorAll("section");
  const navLinks = document.querySelectorAll(".nav-link");

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          // Removemos la clase activa de todos
          navLinks.forEach((link) => {
            link.classList.remove("bg-white/10", "text-white", "shadow-lg");
            link.classList.add("text-slate-400");
          });

          // Buscamos el link que corresponde a esta sección
          const activeLink = document.querySelector(
            `.nav-link[href="/#${entry.target.id}"]`,
          );

          if (activeLink) {
            activeLink.classList.remove("text-slate-400");
            activeLink.classList.add(
              "bg-white/10",
              "text-blue-200",
              "shadow-inner",
            ); // Estilo "Activo"
          }
        }
      });
    },
    {
      threshold: 0.3, // Se activa cuando el 30% de la sección es visible
    },
  );

  sections.forEach((section) => {
    observer.observe(section);
  });
</script>
